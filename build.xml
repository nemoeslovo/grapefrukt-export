<project name="ftcGrapefrukt" basedir="." default="compile swc">
	
	<property file="build.properties" />

	<target name="properties">
		<fail unless="FLEX_HOME">The "FLEX_HOME" property must be set in your global ANT properties or build.properties.</fail>
	</target>

	<target name="clean" description="Remove folders generated by the build.">
		<echo>[clean] Removing generating folders.</echo>
		<delete dir="${deploy.dir}" quiet="true" includeEmptyDirs="true"/>
		<delete dir="${docs.local.dir}" quiet="true" includeEmptyDirs="true"/>
	</target>

	<target name="compile swc" depends="properties,clean" description="Builds library">
		<echo>[swc] Building SWC</echo>
		<echo>[swc] Using Flex SDK at: ${FLEX_HOME}</echo>
		<echo>[swc] Using Compiler at: ${compc}</echo>
		<echo>[swc] Using Air SWC at: ${airglobal.swc}</echo>
		<exec executable="${compc}" dir="${basedir}" failonerror="true">
			<arg line="-o '${deploy.dir}/${binary.name}.swc'" />
			<arg line="-sp '${src.dir}'" />
			<arg line="-is '${src.dir}'" />
			<arg line="-el '${libs.dir}'" />
			<arg line="-el '${playerglobal.swc}'" />
			<arg line="-el '${airglobal.swc}'" />
			<arg line="-target-player ${target.player}" />
		</exec>
	</target>

</project>
